# 																																平衡小车

### 背景

​	平衡小车是本人大三期间,利用空闲制作.做控制类的电子事物是我的热爱.因此打算制作这样一辆**自主平衡**的小车,同时又能**遥控**,实现小时候的玩车想法.

### 制作

#### 整体框架

​	首先明确小车的目标,能**自主平衡**外加**遥控**,因此需要确定一下部分

1. ​	需要合适机械结构,太高不好平衡,同时器件也要尽量保持对称便于平衡.
2. ​	硬件要做到锂电池的电源转换部分,微控制控制部分,驱动部分,无线通讯部分,姿态获取部分,基本显示部分(便于调试),以及其他.
3. ​	软件要驱动电机,同时要获取姿态状态,算法控制平衡,无线及时通信,因此设计合理的程序,让各部分井然有序.



#### 建模部分

​	本人采用silidword上建模,拼接各部分,整合部分,便于图像化观察小车各部分尺寸和设计是否合理,总的就包括电机的固定,主板底座,以及顶层封顶

#### 硬件部分

​	本人使用TPS5430的DC-DC将9~12V的锂电池电压转换为5V的电压,但是因为电机编码器需要3.3V(5V会烧坏电机),增加LDO线性LM117芯片将5V电压转换为3.3V供给微控制器以及电机编码器等使用.电机驱动使用A4950双路电机驱动,电机使用平衡小车售卖的直流电机.显示采用IIC通讯的0.96尺寸OLED屏.无线通讯采用蓝牙模块,微控制器采用stm32c8t6,姿态获取使用MPU6050模块.

#### 软件部分

​	软件采用keil开发,框架整体整体包括如下,**蓝牙通讯**,IIC与uart通讯,定时器以及中断服务程序**,姿态获取解析**,PID算法.因为小车对实时有要求,因此必须要放在中断中运行,保持一定的实时,本人使用mpu6050的外部波形,触发外部中断完成中断中算法运算和姿态调整.

### 结果和收获

​	直到如今,小车实现了基本自立但不是很稳.蓝牙正常运行,但遥控小车姿态还未加入

​	项目而言机械机构还需更加合理,同时硬件还可以布排更好,软件滤波使用卡尔曼滤波,同时代理框架和步骤更加合理,那么小车稳定性会更好.

​	收获是,获得一个小车,满足了自己对控制的想法,同时小车的项目让我明白代码的整洁和合理框架的重要性,认识到了实时的重要性,开启了对系统的认识

### 参考资料

​	参考资料包括本人的产出和网上收集部分,具体查看参考资料文件夹中addition information.

### issue

​	软件框架怎么样的,中断程序终跑的那行程序?

​	软件中碰到什么困难,为什么出现这种困难?

​	

​	



**硬件要芯片,方案设计摆明**,**软件要语言,框架,用到环境和文件的其他说明**

**结果**对比优缺点****

**(关键技术:姿态数据解析)**







